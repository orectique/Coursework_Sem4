data("balsakhi")
#
# Once you installed the packages, load them to get started:
#
library(haven)
library(ICC)
library(randomizr)
library(multiwayvcov)
library(lmtest)
library(knitr)
library(pwrcalc)
library(Hmisc)
data("balsakhi")
nratio = 1
power = .8
alpha = .05
data = balsakhi$pre_mathnorm
base_mean = mean(data, na.rm = TRUE)
base_sd = sd(data, na.rm = TRUE)
treated_mean = base_mean + 0.4*base_sd
baseline_subset <- subset(balsakhi, !is.na(pre_mathnorm))
cluster_var_subset <- as.factor(baseline_subset$schoolid)
outcome_subset <- baseline_subset$pre_mathnorm
icc <- ICCest(cluster_var_subset, outcome_subset, data = baseline_subset)
rho <- icc$ICC
rho
total_clusters = 36
cluster_size_model <- twomeans(m1 = base_mean, m2 = treated_mean, sd = base_sd,
power=power, nratio=nratio, sig.level= alpha)%>%
clustered(numclus = total_clusters, rho = rho)
n = cluster_size_model$`n1 (adjusted)` + cluster_size_model$`n2 (adjusted)`
100*total_clusters + 10*n
n/total_clusters
total_clusters
X
x <- c()
y <- c()
for (total_clusters in 1:65){
cluster_size_model <- twomeans(m1 = base_mean, m2 = treated_mean, sd = base_sd,
power=power, nratio=nratio, sig.level= alpha)%>%
clustered(numclus = total_clusters, rho = rho)
n = cluster_size_model$`n1 (adjusted)` + cluster_size_model$`n2 (adjusted)`
y <- c(y, 100*total_clusters + 10*n)
x <- c(x, total_clusters)
total_clusters
n/total_clusters
}
for (total_clusters in 36:65){
cluster_size_model <- twomeans(m1 = base_mean, m2 = treated_mean, sd = base_sd,
power=power, nratio=nratio, sig.level= alpha)%>%
clustered(numclus = total_clusters, rho = rho)
n = cluster_size_model$`n1 (adjusted)` + cluster_size_model$`n2 (adjusted)`
y <- c(y, 100*total_clusters + 10*n)
x <- c(x, total_clusters)
total_clusters
n/total_clusters
}
X
x <- c()
y <- c()
for (total_clusters in 36:65){
cluster_size_model <- twomeans(m1 = base_mean, m2 = treated_mean, sd = base_sd,
power=power, nratio=nratio, sig.level= alpha)%>%
clustered(numclus = total_clusters, rho = rho)
n = cluster_size_model$`n1 (adjusted)` + cluster_size_model$`n2 (adjusted)`
y <- c(y, 100*total_clusters + 10*n)
x <- c(x, total_clusters)
total_clusters
n/total_clusters
}
plot(x, y)
y
z <- c()
for (total_clusters in 36:65){
cluster_size_model <- twomeans(m1 = base_mean, m2 = treated_mean, sd = base_sd,
power=power, nratio=nratio, sig.level= alpha)%>%
clustered(numclus = total_clusters, rho = rho)
n = cluster_size_model$`n1 (adjusted)` + cluster_size_model$`n2 (adjusted)`
y <- c(y, 100*total_clusters + 10*n)
x <- c(x, total_clusters)
total_clusters
z <- c(z, n/total_clusters)
}
plot(x, y)
z
cluster_size_model <- twomeans(m1 = base_mean, m2 = treated_mean, sd = base_sd,
power=power, nratio=nratio, sig.level= alpha)%>%
clustered(numclus = 37, rho = rho)
cluster_size_model
u <- runif(1000)
u
u <- runif(1000, 2, 5)
u
setwd("E:/GitHub/Coursework_Sem4/SIT-R")
plot(x, y, type = 'l;)
plot(x, y, type = 'l')
plot(x, y, type = 'l')
x = seq(-3, 3, length = 200)
y = dnorm(x, mean = 0, sd = 1)
y = dnorm(x, mean = 0, sd = 1)
plot(x, y, type = 'l')
qnorm(0.95)
qnorm(0.95)
qnorm(0.975)
qnorm(0.95)
qnorm(0.975)
library(MASS)
head(survey)
height.survey = survey$Height
mean(height.survey, na.rm = TRUE)
n = length(heigh.survey)
n = length(height.survey)
sigma = 9.48
sem = sigma/sqrt(n)
sem
qnorm(0.959964)
E = qnorm(0.975)*sem
xbar = mean(heght.survey, na.rm = TRUE)
qnorm(0.959964)
E = qnorm(0.975)*sem
xbar = mean(height.survey, na.rm = TRUE)
xbar + c(-E, E)
xbar + c(-E, E)
qnorm(0.959964)
E = qnorm(0.975)*sem
xbar = mean(height.survey, na.rm = TRUE)
